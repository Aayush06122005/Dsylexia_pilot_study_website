<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Participant Dashboard - Dyslexia Research Study</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='landing_style.css') }}">
</head>
<body>
    <!-- Header -->
    <header class="primary-bg text-white py-6">
        <div class="content-wrapper flex justify-between items-center">
            <div class="flex items-center">
                <img src="{{ url_for('static', filename='read.jpg') }}" alt="Dashboard Graphic" class="h-12 w-12 rounded-full mr-4 hidden md:block">
                <h1 class="text-xl md:text-2xl font-bold">Welcome to Task</h1>
            </div>
            <nav>
                <ul class="flex space-x-6 text-lg md:text-xl items-center">
                    <li><a href="{{ url_for('landing') }}#about" class="hover:text-yellow-100 transition">About</a></li>
                    <li><a href="{{ url_for('landing') }}#contact" class="hover:text-yellow-100 transition">Contact</a></li>
                    <li><a href="/participant-dashboard" class="hover:text-yellow-100 transition ">Dashboard</a></li>
                    <li><a href="#" id="logoutBtn" class="hover:text-yellow-100 transition ">Logout</a></li>
                </ul>
            </nav>
        </div>
    </header>

    {% include 'partials/accessibility.html' %}
</main>

    
        {% include 'partials/footer.html' %}
    

    
        {% include 'partials/accessibility_script.html' %}
    px`);
                document.body.style.fontSize = `${currentFontSize}px`;
                root.style.fontSize = `${currentFontSize}px`;
            }
    
            // Logout functionality
            document.getElementById('logoutBtn').addEventListener('click', function() {
                fetch('/api/logout', {
                    method: 'POST',
                    credentials: 'same-origin',
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(res => res.json())
                .then(data => {
                    localStorage.clear();
                    window.location.href = '/';
                })
                .catch(() => {
                    localStorage.clear();
                    window.location.href = '/';
                });
            });
    
            
            // Task status logic for button
           
            document.addEventListener('DOMContentLoaded', function() {
                const btn = document.getElementById('startTaskBtn');
                // Always check for saved progress
                fetch('/api/get-saved-progress')
                .then(res => res.json())
                .then(data => {
                    if (data.success && data.saved_audio) {
                        // There's saved progress, change button to "Continue Task"
                        if (btn) {
                            btn.textContent = 'Continue Task';
                            btn.classList.add('bg-green-600', 'hover:bg-green-700');
                            btn.classList.remove('primary-bg');
                        }
                    }
                });
                if (btn) {
                    btn.addEventListener('click', function() {
                        // Always redirect to task11.html (the actual task page)
                                window.location.href = "{{ url_for('task11') }}";
                    });
                }
            });


    
        </script>

 
</body>
</html> 